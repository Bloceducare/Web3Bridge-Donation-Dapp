{"ast":null,"code":"import { noop } from \"../core/utils.mjs\";\nexport function createWebStoragePersister(_ref) {\n  let {\n    storage,\n    key = \"REACT_QUERY_OFFLINE_CACHE\",\n    throttleTime = 1000,\n    serialize = JSON.stringify,\n    deserialize = JSON.parse,\n    retry\n  } = _ref;\n\n  if (typeof storage !== 'undefined') {\n    const trySave = persistedClient => {\n      try {\n        storage.setItem(key, serialize(persistedClient));\n      } catch (error) {\n        return error;\n      }\n    };\n\n    return {\n      persistClient: throttle(persistedClient => {\n        let client = persistedClient;\n        let error = trySave(client);\n        let errorCount = 0;\n\n        while (error && client) {\n          errorCount++;\n          client = retry == null ? void 0 : retry({\n            persistedClient: client,\n            error,\n            errorCount\n          });\n\n          if (client) {\n            error = trySave(client);\n          }\n        }\n      }, throttleTime),\n      restoreClient: () => {\n        const cacheString = storage.getItem(key);\n\n        if (!cacheString) {\n          return;\n        }\n\n        return deserialize(cacheString);\n      },\n      removeClient: () => {\n        storage.removeItem(key);\n      }\n    };\n  }\n\n  return {\n    persistClient: noop,\n    restoreClient: noop,\n    removeClient: noop\n  };\n}\n\nfunction throttle(func) {\n  let wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n  let timer = null;\n  let params;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    params = args;\n\n    if (timer === null) {\n      timer = setTimeout(() => {\n        func(...params);\n        timer = null;\n      }, wait);\n    }\n  };\n}","map":{"version":3,"names":["noop","createWebStoragePersister","storage","key","throttleTime","serialize","JSON","stringify","deserialize","parse","retry","trySave","persistedClient","setItem","error","persistClient","throttle","client","errorCount","restoreClient","cacheString","getItem","removeClient","removeItem","func","wait","timer","params","args","setTimeout"],"sources":["/home/king-longs/Desktop/final/node_modules/react-query/lib/createWebStoragePersister/index.mjs"],"sourcesContent":["import { noop } from \"../core/utils.mjs\";\nexport function createWebStoragePersister({\n  storage,\n  key = \"REACT_QUERY_OFFLINE_CACHE\",\n  throttleTime = 1000,\n  serialize = JSON.stringify,\n  deserialize = JSON.parse,\n  retry\n}) {\n  if (typeof storage !== 'undefined') {\n    const trySave = persistedClient => {\n      try {\n        storage.setItem(key, serialize(persistedClient));\n      } catch (error) {\n        return error;\n      }\n    };\n\n    return {\n      persistClient: throttle(persistedClient => {\n        let client = persistedClient;\n        let error = trySave(client);\n        let errorCount = 0;\n\n        while (error && client) {\n          errorCount++;\n          client = retry == null ? void 0 : retry({\n            persistedClient: client,\n            error,\n            errorCount\n          });\n\n          if (client) {\n            error = trySave(client);\n          }\n        }\n      }, throttleTime),\n      restoreClient: () => {\n        const cacheString = storage.getItem(key);\n\n        if (!cacheString) {\n          return;\n        }\n\n        return deserialize(cacheString);\n      },\n      removeClient: () => {\n        storage.removeItem(key);\n      }\n    };\n  }\n\n  return {\n    persistClient: noop,\n    restoreClient: noop,\n    removeClient: noop\n  };\n}\n\nfunction throttle(func, wait = 100) {\n  let timer = null;\n  let params;\n  return function (...args) {\n    params = args;\n\n    if (timer === null) {\n      timer = setTimeout(() => {\n        func(...params);\n        timer = null;\n      }, wait);\n    }\n  };\n}"],"mappings":"AAAA,SAASA,IAAT,QAAqB,mBAArB;AACA,OAAO,SAASC,yBAAT,OAOJ;EAAA,IAPuC;IACxCC,OADwC;IAExCC,GAAG,GAAG,2BAFkC;IAGxCC,YAAY,GAAG,IAHyB;IAIxCC,SAAS,GAAGC,IAAI,CAACC,SAJuB;IAKxCC,WAAW,GAAGF,IAAI,CAACG,KALqB;IAMxCC;EANwC,CAOvC;;EACD,IAAI,OAAOR,OAAP,KAAmB,WAAvB,EAAoC;IAClC,MAAMS,OAAO,GAAGC,eAAe,IAAI;MACjC,IAAI;QACFV,OAAO,CAACW,OAAR,CAAgBV,GAAhB,EAAqBE,SAAS,CAACO,eAAD,CAA9B;MACD,CAFD,CAEE,OAAOE,KAAP,EAAc;QACd,OAAOA,KAAP;MACD;IACF,CAND;;IAQA,OAAO;MACLC,aAAa,EAAEC,QAAQ,CAACJ,eAAe,IAAI;QACzC,IAAIK,MAAM,GAAGL,eAAb;QACA,IAAIE,KAAK,GAAGH,OAAO,CAACM,MAAD,CAAnB;QACA,IAAIC,UAAU,GAAG,CAAjB;;QAEA,OAAOJ,KAAK,IAAIG,MAAhB,EAAwB;UACtBC,UAAU;UACVD,MAAM,GAAGP,KAAK,IAAI,IAAT,GAAgB,KAAK,CAArB,GAAyBA,KAAK,CAAC;YACtCE,eAAe,EAAEK,MADqB;YAEtCH,KAFsC;YAGtCI;UAHsC,CAAD,CAAvC;;UAMA,IAAID,MAAJ,EAAY;YACVH,KAAK,GAAGH,OAAO,CAACM,MAAD,CAAf;UACD;QACF;MACF,CAjBsB,EAiBpBb,YAjBoB,CADlB;MAmBLe,aAAa,EAAE,MAAM;QACnB,MAAMC,WAAW,GAAGlB,OAAO,CAACmB,OAAR,CAAgBlB,GAAhB,CAApB;;QAEA,IAAI,CAACiB,WAAL,EAAkB;UAChB;QACD;;QAED,OAAOZ,WAAW,CAACY,WAAD,CAAlB;MACD,CA3BI;MA4BLE,YAAY,EAAE,MAAM;QAClBpB,OAAO,CAACqB,UAAR,CAAmBpB,GAAnB;MACD;IA9BI,CAAP;EAgCD;;EAED,OAAO;IACLY,aAAa,EAAEf,IADV;IAELmB,aAAa,EAAEnB,IAFV;IAGLsB,YAAY,EAAEtB;EAHT,CAAP;AAKD;;AAED,SAASgB,QAAT,CAAkBQ,IAAlB,EAAoC;EAAA,IAAZC,IAAY,uEAAL,GAAK;EAClC,IAAIC,KAAK,GAAG,IAAZ;EACA,IAAIC,MAAJ;EACA,OAAO,YAAmB;IAAA,kCAANC,IAAM;MAANA,IAAM;IAAA;;IACxBD,MAAM,GAAGC,IAAT;;IAEA,IAAIF,KAAK,KAAK,IAAd,EAAoB;MAClBA,KAAK,GAAGG,UAAU,CAAC,MAAM;QACvBL,IAAI,CAAC,GAAGG,MAAJ,CAAJ;QACAD,KAAK,GAAG,IAAR;MACD,CAHiB,EAGfD,IAHe,CAAlB;IAID;EACF,CATD;AAUD"},"metadata":{},"sourceType":"module"}